<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Gracias â€” ObraTitan</title>
  <link rel="stylesheet" href="assets/styles.css" />
  <style>
    .wrap { text-align:center; padding:64px 24px; max-width:720px; margin:0 auto }
    .cta-col { display:flex; gap:12px; flex-wrap:wrap; justify-content:center; margin-top:16px }
    .muted { color: var(--muted) }
    .pill { background: rgba(227,160,8,.15); color:#f5d278; border:1px solid var(--amber);
            padding:4px 8px; border-radius:999px; font-size: var(--fs-sm); font-weight:800 }
    .note { font-size: var(--fs-sm); color: var(--muted-2); margin-top:10px }
  </style>
</head>
<body>
  <main class="container">
    <div class="wrap card">
      <h2 style="margin-top:0">Â¡Gracias por tu compra! ðŸŽ‰</h2>

      <p id="msg" class="muted">
        Tu pago fue recibido correctamente. Puedes <strong>entrar a la app</strong> ahora mismo o
        usar el enlace que tambiÃ©n te enviaremos por correo.
      </p>

      <!-- Muestra el plan si viene en el querystring (?plan=basic|pro) -->
      <p id="plan-pill" class="pill" style="display:none"></p>

      <div class="cta-col">
        <!-- âœ… Enlace directo a tu app -->
        <a id="enter-btn" class="btn" href="https://obratitanhuntrix.netlify.app/">
          Entrar a la app
        </a>

        <!-- Copiar enlace (respaldo) -->
        <button id="copy-btn" class="btn-outline" type="button">
          Copiar enlace
        </button>
      </div>

      <p class="note" id="redir-note">
        Te redirigiremos automÃ¡ticamente en <span id="sec">6</span> segundosâ€¦
      </p>

      <a href="/" class="btn-outline" style="margin-top:14px">Volver al inicio</a>
    </div>
  </main>

  <script>
    // URL destino de tu app
    const APP_URL = 'https://obratitanhuntrix.netlify.app/';

    // Lee ?plan=pro|basic para mostrar una pastilla
    const qs = new URLSearchParams(location.search);
    const plan = (qs.get('plan') || '').toLowerCase();
    const pill = document.getElementById('plan-pill');
    if (plan === 'basic' || plan === 'pro') {
      pill.textContent = `Plan ${plan.toUpperCase()} activado`;
      pill.style.display = 'inline-block';
    }

    // Copiar enlace
    document.getElementById('copy-btn').addEventListener('click', async () => {
      try {
        await navigator.clipboard.writeText(APP_URL);
        const old = document.getElementById('copy-btn').textContent;
        document.getElementById('copy-btn').textContent = 'Â¡Enlace copiado!';
        setTimeout(() => document.getElementById('copy-btn').textContent = old, 1200);
      } catch {
        alert('No se pudo copiar. Entra con el botÃ³n "Entrar a la app".');
      }
    });

    // Auto-redirigir en X segundos
    let seconds = 6;
    const secEl = document.getElementById('sec');
    const tick = setInterval(() => {
      seconds -= 1;
      secEl.textContent = String(seconds);
      if (seconds <= 0) {
        clearInterval(tick);
        location.href = APP_URL;
      }
    }, 1000);

    // Si el usuario hace clic en "Entrar a la app", cancela el temporizador por prolijidad
    document.getElementById('enter-btn').addEventListener('click', () => clearInterval(tick));
  </script>
</body>
</html>
